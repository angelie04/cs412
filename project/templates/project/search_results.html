<!-- File: search_results.html -->
<!-- Author: Angelie Darbouze (angelie@bu.edu), 12/7/2025 -->
<!-- Description: Displays the search results for Restaurant matches -->

{% extends "project/base.html" %}
{% load static %}
{% block content %}
<div class="container py-4">
    <!-- <h1>Results for "{{ request.GET.query }}"</h1> -->
    <h2> Select the restaurant(s) you would like to review: </h2>
    {% if restaurants %}
    {% for r in restaurants %}
    <div class="card">
        <h4 style=" color: #e85bd9;"><strong>{{ r.name }}</strong></h4>
        <p>{{ r.address }}</p>
        <div class="cuisine">
            {% for c in r.categories.all %}
            <span class="cuisine-badge" title="{{ c.name }}">{{ c.name }}</span>
            {% endfor %}
        </div>
        {% if r.image %}
        <img src="{{ r.image.url }}" alt="{{ r.name }}" class="card-image">
        {% endif %}
        <!-- user must be logged in to write a review -->
        {% if user.is_authenticated %}
        <a class="write-review" href="{% url 'write_review' r.id %}"> Write Review</a>
        {% else %}
        <a class="write-review" href="{% url 'login' %}?next={% url 'write_review' r.id %}">
            Log in to write a review!
        </a>
        {% endif %}
    </div>
    {% endfor %}
    {% else %}
    <p style="padding: 32px;">No restaurants match your search.</p>
    {% endif %}
</div>
<div class="d-flex justify-content-end mt-3 pt-2" style="padding: 32px;">
    <a class="btn btn-outline-secondary px-4 py-2" href="{% url 'review' %}">Back to search</a>
</div>
{% endblock %}